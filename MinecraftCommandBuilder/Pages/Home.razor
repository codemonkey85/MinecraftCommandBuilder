@page "/"

@inject ICommandService CommandService

<PageTitle>
    Minecraft Command Builder
</PageTitle>

<MudStack Class="mt-3">
    <CopyToClipboardComponent CommandText="@CommandText" />
    <MudButton OnClick="@ChangeCommandText"
               ButtonType="@ButtonType.Button"
               Variant="@Variant.Filled"
               title="Change command text">
        Change command text
    </MudButton>
    <MudSelect T="MinecraftDataCSharp.Block">
        @foreach (var block in Blocks.Take(10))
        {
            <MudSelectItem T="MinecraftDataCSharp.Block" Value="@block">
                @block.displayName
            </MudSelectItem>
        })
    </MudSelect>
</MudStack>

@code {
    private string CommandText { get; set; } = string.Empty;

    private List<MinecraftDataCSharp.Block> Blocks { get; set; } = [];

    protected override async Task OnInitializedAsync()
    {
        if (Blocks is [])
        {
            Blocks = await BlockRepository.GetAllBlocks() ?? [];
        }
    }

    private void ChangeCommandText() => CommandText = CommandService.GiveCommand("@s", "apple", 1);
}
